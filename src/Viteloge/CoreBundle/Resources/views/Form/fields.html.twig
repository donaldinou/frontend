{% extends 'bootstrap_3_horizontal_layout.html.twig' %}

{%- block form_debug -%}
    <ol>
        {% for key, value in _context %}
        <li>{{ key }}</li>
        {% endfor %}
    </ol>
{%- endblock -%}

{%- block form_widget_success -%}
    <span class="fa fa-check-circle form-control-feedback" aria-hidden="true"></span>
    <span class="sr-only">(error)</span>
{%- endblock -%}

{%- block form_widget_warning -%}
    <span class="fa fa-warning form-control-feedback" aria-hidden="true"></span>
    <span class="sr-only">(error)</span>
{%- endblock -%}

{%- block form_widget_error -%}
    <span class="fa fa-exclamation-circle form-control-feedback" aria-hidden="true"></span>
    <span class="sr-only">(error)</span>
{%- endblock -%}

{%- block form_widget_simple -%}
    {{- parent() -}}
    {% if (not compound or force_error|default(false)) and not valid %}
        {{- block('form_widget_error') -}}
    {% endif %}
{%- endblock form_widget_simple -%}

{%- block form_row -%}
    <div class="form-group{% if (not compound or force_error|default(false)) and not valid %} has-error has-feedback{% endif %}">
        {{- form_label(form) -}}
        <div class="{{ block('form_group_class') }}">
            {{- form_widget(form) -}}
            {{- form_errors(form) -}}
        </div>
    </div>
{%- endblock form_row -%}

{%- block form_errors -%}
    {%- if errors|length > 0 -%}
        {%- if form.parent -%}
            <span class="help-block">
                <ul class="list-unstyled">
                    {%- for error in errors -%}
                        {% if error.cause.constraint.payload.severity is defined %}
                            {% set severity = error.cause.constraint.payload.severity %}
                        {% endif %}
                        <li><span class="fa fa-exclamation-circle"></span>&nbsp;{{ error.message }}</li>
                    {%- endfor -%}
                </ul>
            </span>
        {%- else -%}
            {%- embed 'VitelogeCoreBundle:Global:alert.html.twig' with { alerts: errors, valid: valid, type: 'danger', dismissible: true } -%}
                {%- block alert_title -%}
                    {% trans %}Error{% endtrans %}&nbsp;:
                {%- endblock -%}
            {%- endembed -%}
        {%- endif -%}
    {%- endif -%}
{%- endblock -%}
